# joom-calendar

Бэкенд для сервиса-календаря (тестовое задание в Joom)

# Задача

Написать бэкенд для сервиса Календарь.

Сервис должен иметь HTTP API, позволяющее:

- создать пользователя; ✅
- создать встречу в календаре пользователя со списком приглашенных пользователей; ✅ (можно ли создавать встречу, если у
  пользователя уже есть принятая встреча в это время?)
- получить детали встречи; ✅
- принять или отклонить приглашение другого пользователя; ✅ (учитывать ли пользователя с непринятым приглашением как
  участника встречи?)
- найти все встречи пользователя для заданного промежутка времени; ✅
- для заданного списка пользователей и минимальной продолжительности встречи, найти ближайшей интервал времени, в
  котором все эти пользователи свободны. ✅
- У встреч в календаре должна быть возможна настройка повторов. В повторах нужно поддержать все возможности, доступные в
  Google-календаре, кроме Сustom. ✅

Будет плюсом, если вы также реализуете одну или несколько из следующих функций:

- аутентификация пользователя;
- поддержка видимости встреч (если встреча приватная, другие пользователи могут получить только информацию о занятости
  пользователя, но не детали встречи);
- настройки часового пояса пользователя и его рабочего времени, использование этих настроек для поиска интервала
  времени, в котором участники свободны;
- настройки нотификации пользователя перед встречей (саму нотификацию достаточно реализовать записью в лог);
- поддержка Custom повторов, как в Google-календаре;
- другие функции, которые кажутся вам полезными в календаре.

# Имплементация

## HTTP API

### Создание пользователя

`POST /users`

```json
{
  "name": "ishcherbina",
  "email": "ishcherbina@example.com"
}
```

```json
{
    "id": 1
}
```

### Создание встречи

`POST /events`

```json
{
  "title": "event2",
  "desc": "description2",
  "start_date": "2022-09-06T14:16:47.878689Z",
  "invited_user_ids": [],
  "organizer_user_id": 1,
  "duration": 6000,
  "repeat": {
    "frequency": "weekly",
    "days_of_week": [
      1,
      2,
      3
    ]
  }
}
```

### Получение встречи

`GET /events/1`

```json
{
  "id": 1,
  "title": "event2",
  "description": "description2",
  "duration": 6000,
  "attendees": [
    {
      "status": "organizer",
      "user": {
        "id": 1,
        "name": "ishcherbina",
        "email": "ishcherbina@example.com",
        "created_at": "2022-09-06T14:16:47.878689Z",
        "updated_at": "2022-09-06T14:16:47.878689Z"
      },
      "created_at": "2022-09-06T14:16:53.178841Z",
      "updated_at": "2022-09-06T14:16:53.178841Z"
    }
  ],
  "rrule": "DTSTART:20220906T141653Z\nFREQ=WEEKLY;BYDAY=MO,TU,WE",
  "created_at": "2022-09-06T14:16:53.178841Z",
  "updated_at": "2022-09-06T14:16:53.178841Z"
}
```

### Получение списка встреч

`GET /users/1/events?from=2022-09-06T14:16:47.878689Z&to=2022-09-06T14:16:47.878689Z`

```json
[
  {
    "id": 1,
    "title": "event2",
    "description": "description2",
    "duration": 6000,
    "attendees": [
      {
        "status": "organizer",
        "user": {
          "id": 1,
          "name": "ishcherbina",
          "email": "ishcherbina@example.com",
          "created_at": "2022-09-06T14:16:47.878689Z",
          "updated_at": "2022-09-06T14:16:47.878689Z"
        },
        "created_at": "2022-09-06T14:16:53.178841Z",
        "updated_at": "2022-09-06T14:16:53.178841Z"
      }
    ],
    "rrule": "DTSTART:20220906T141653Z\nFREQ=WEEKLY;BYDAY=MO,TU,WE",
    "created_at": "2022-09-06T14:16:53.178841Z",
    "updated_at": "2022-09-06T14:16:53.178841Z"
  }
]
```

### Получить ближайший свободный интервал

`GET /events:nearest-empty-time-interval?duration=1h&user_ids=1&user_ids=2`

```json
{
  "start": "2022-09-06T14:16:47.878689Z",
  "end": "2022-09-06T14:16:47.878689Z"
}
```

### Принять/отклонить приглашение на встречу

`POST /event-invites/{invite_id}:accept`

### Отклонить приглашеие на встречу

`POST /event-invites/{invite_id}:decline`